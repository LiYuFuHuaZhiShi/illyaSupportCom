(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ffb4070"],{"11c1":function(t,e,a){},"1a3d":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-drawer",{attrs:{title:"添加CV",visible:t.addcvdrawer,"with-header":!1},on:{"update:visible":function(e){t.addcvdrawer=e}}},[a("div",{staticStyle:{padding:"25px"}},[t.bdcv_cvid?a("el-row",{staticClass:"funcbuttonrow"},[t._v("已选择的CVID: "+t._s(t.bdcv_cvid)+" , CV名: "+t._s(t.bdcv_cvname))]):t._e(),a("el-row",{staticClass:"funcbuttonrow"},[a("el-input",{attrs:{placeholder:"请输入角色名"},model:{value:t.bdcv_role_sort,callback:function(e){t.bdcv_role_sort=e},expression:"bdcv_role_sort"}},[a("template",{slot:"prepend"},[t._v("CV权重")])],2)],1),a("el-row",{staticClass:"funcbuttonrow"},[a("el-input",{attrs:{placeholder:"请输入角色名"},model:{value:t.bdcv_role_name,callback:function(e){t.bdcv_role_name=e},expression:"bdcv_role_name"}},[a("template",{slot:"prepend"},[t._v("角色名")])],2)],1),a("el-row",{staticClass:"funcbuttonrow"},[a("el-button",{on:{click:function(e){return t.SendBdCV()}}},[t._v("确定")])],1),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bdcv_list}},[a("el-table-column",{attrs:{prop:"id",label:"CVID",width:"100"}}),a("el-table-column",{attrs:{prop:"head",label:"人像",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"50%",height:"auto"},attrs:{src:t.row.head}})]}}])}),a("el-table-column",{attrs:{prop:"people_name",label:"CV名"}}),a("el-table-column",{attrs:{label:"更多",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){t.bdcv_cvid=e.row.id,t.bdcv_cvname=e.row.people_name}}},[t._v("选择")])]}}])})],1)]],2)]),a("el-dialog",{attrs:{title:"添加播放地址",visible:t.dialog_addplayurl},on:{"update:visible":function(e){t.dialog_addplayurl=e}}},[a("el-row",{staticClass:"funcbuttonrow"},[t._v("被添加的番剧id:"+t._s(t.id))]),a("el-row",{staticClass:"funcbuttonrow"},[a("el-input",{attrs:{placeholder:"播放来源名"},model:{value:t.addplayurl_source_name,callback:function(e){t.addplayurl_source_name=e},expression:"addplayurl_source_name"}},[a("template",{slot:"prepend"},[t._v("播放来源名")])],2)],1),a("el-row",{staticClass:"funcbuttonrow"},[a("el-input",{attrs:{placeholder:"播放地址"},model:{value:t.addplayurl_url,callback:function(e){t.addplayurl_url=e},expression:"addplayurl_url"}},[a("template",{slot:"prepend"},[t._v("播放地址")])],2)],1),a("el-row",{staticClass:"funcbuttonrow"},[a("el-input",{attrs:{placeholder:"地址权重值"},model:{value:t.addplayurl_sort,callback:function(e){t.addplayurl_sort=e},expression:"addplayurl_sort"}},[a("template",{slot:"prepend"},[t._v("地址权重值")])],2)],1),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add_playsourceurl()}}},[t._v("添加")])],1),a("div",{staticClass:"leftbox"},[a("el-row",[a("el-col",{staticClass:"common rwoh"},[a("el-upload",{staticClass:"content",attrs:{drag:"",action:"","http-request":t.upLoad,"show-file-list":!1,multiple:""}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.loadcover}}),a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v(" 将文件拖到此处，或 "),a("em",[t._v("点击上传")])])]),t._v(" "+t._s(t.cover)+" ")],1),a("el-row",{staticClass:"common rwoh"},[a("el-button",[t._v("番剧ID: "+t._s(t.id))]),a("el-button",[t._v("系统唯一ID: "+t._s(t.identification))])],1),a("el-col",[a("el-row",{staticClass:"common rwoh"},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("template",{slot:"prepend"},[t._v("番剧名")])],2)],1),a("el-row",{staticClass:"common rwoh",staticStyle:{"line-height":"2.5"}},[a("el-col",{staticClass:"common elmr",attrs:{span:5}},[a("el-input",{attrs:{placeholder:"请输入剧集数"},model:{value:t.setscount,callback:function(e){t.setscount=e},expression:"setscount"}},[a("template",{slot:"prepend"},[t._v("剧集数")])],2)],1),a("el-col",{staticClass:"common elmr",attrs:{span:6}},[t._v(" 开播时间 "),a("el-date-picker",{attrs:{type:"date",placeholder:"开播时间",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.openplay_time,callback:function(e){t.openplay_time=e},expression:"openplay_time"}})],1),a("el-col",{staticClass:"common elmr",attrs:{span:10}},[a("span",{},[t._v("连载状态")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.upstatus,callback:function(e){t.upstatus=e},expression:"upstatus"}},[a("el-option",{attrs:{label:"连载中",value:!0}}),a("el-option",{attrs:{label:"已完结",value:!1}})],1)],1)],1),a("el-row",{staticClass:"common rwoh"},[a("el-col",{staticClass:"common elmr",staticStyle:{float:"left",width:"300px"}},[a("el-radio-group",{model:{value:t.classification,callback:function(e){t.classification=e},expression:"classification"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("番剧")]),a("el-radio-button",{attrs:{label:"2"}},[t._v("剧场版")]),a("el-radio-button",{attrs:{label:"3"}},[t._v("OVA")]),a("el-radio-button",{attrs:{label:"4"}},[t._v("SP")])],1)],1),a("el-col",{staticClass:"common elmr",staticStyle:{float:"left",width:"500px"}},[a("span",{},[t._v("是否允许站内播放")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.station_play,callback:function(e){t.station_play=e},expression:"station_play"}},[a("el-option",{attrs:{label:"允许",value:!0}}),a("el-option",{attrs:{label:"不开放",value:!1}})],1)],1)],1)],1)],1),a("div",{staticClass:"line"}),a("el-row",{staticClass:"common rwoh"},[t._v(" 番剧介绍 "),a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.introduce,callback:function(e){t.introduce=e},expression:"introduce"}})],1),a("el-row",{staticClass:"common rwoh"},[t._v(" STAFF "),a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.staff,callback:function(e){t.staff=e},expression:"staff"}})],1),a("div",{staticClass:"line"}),a("el-row",{staticClass:"common rwoh"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cv_list}},[a("el-table-column",{attrs:{prop:"",label:"CV头像",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"50%",height:"auto"},attrs:{src:t.row.head}})]}}])}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),a("el-table-column",{attrs:{prop:"role_name",label:"角色名",width:""}}),a("el-table-column",{attrs:{prop:"people_name",label:"CV名",width:""}}),a("el-table-column",{attrs:{prop:"cv_id",label:"CVID",width:"100"}}),a("el-table-column",{attrs:{prop:"sort",label:"权重",width:"100"}}),a("el-table-column",{attrs:{label:"更多",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.del_BDcv(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),a("div",{staticClass:"line"}),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.playurl_tablist}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"180"}}),a("el-table-column",{attrs:{prop:"source_name",label:"来源",width:"180"}}),a("el-table-column",{attrs:{prop:"sort",label:"权重",width:"180"}}),a("el-table-column",{attrs:{prop:"url",label:"URL"}}),a("el-table-column",{attrs:{label:"更多",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.change(e.row.id)}}},[t._v("编辑")]),a("el-button",{on:{click:function(a){return t.del_playsourceurl(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1),a("div",{staticClass:"reightbox"},[a("el-row",{staticClass:"funcbuttonrow"},[1===t.status?a("div",[t._v("番剧状态: 正常")]):t._e(),2===t.status?a("div",[t._v("番剧状态: 已下架")]):t._e()]),a("el-row",{staticClass:"funcbuttonrow"},[a("el-button",{on:{click:function(e){return t.save()}}},[t._v("保存")])],1),a("el-row",{staticClass:"funcbuttonrow"},[a("el-button",{on:{click:function(e){return t.BdCV()}}},[t._v("添加CV")])],1),a("el-row",{staticClass:"funcbuttonrow"},[a("el-button",{on:{click:function(e){t.dialog_addplayurl=!0}}},[t._v("添加播放地址")])],1),a("el-row",{staticClass:"funcbuttonrow"},[a("el-button",{on:{click:function(e){return t.change(t.id,1)}}},[t._v("上架")])],1),a("el-row",{staticClass:"funcbuttonrow"},[a("el-button",{on:{click:function(e){return t.change(t.id,2)}}},[t._v("下架")])],1),a("el-row",{staticClass:"funcbuttonrow"},[a("el-button",{on:{click:function(e){return t.del(t.id,2)}}},[t._v("删除")])],1)],1)],1)},o=[],s=(a("b0c0"),{name:"editbangumi",data:function(){return{id:"",name:"",classification:"",identification:"",setscount:"",introduce:"",cover:"",loadcover:"",upstatus:"",staff:"",station_play:"",openplay_time:"",sort:"",status:"",playurl_tablist:[],cv_list:[],dialog_addplayurl:!1,addplayurl_source_name:"",addplayurl_url:"",addplayurl_sort:"",addcvdrawer:!1,bdcv_cvid:"",bdcv_cvname:"",bdcv_role_sort:0,bdcv_role_name:"",bdcv_list:[]}},created:function(){this.query(this.$route.query.id)},methods:{getBdCVList:function(){var t=this;this.$http.cvList({}).then((function(e){200==e.code&&(t.bdcv_list=e.data)})).catch((function(t){console.log("error",t)}))},BdCV:function(){this.getBdCVList(),this.addcvdrawer=!0},del_BDcv:function(t){var e=this;this.$http.BangumiCvDel({id:t}).then((function(t){200==t.code&&e.query(e.id)})).catch((function(t){console.log("error",t)}))},SendBdCV:function(){var t=this;this.$http.BangumiCvAddoredit({bangumi_id:this.id,cv_id:this.bdcv_cvid,sort:this.bdcv_role_sort,role_name:this.bdcv_role_name}).then((function(e){200==e.code&&(t.query(t.id),t.bdcv_cvid="",t.bdcv_role_sort=0,t.bdcv_role_name="",t.addcvdrawer=!1)})).catch((function(t){console.log("error",t)}))},del_playsourceurl:function(t){var e=this;this.$http.bangumiPlayurlDel({id:t}).then((function(t){200==t.code&&e.query(e.id)})).catch((function(t){console.log("error",t)}))},add_playsourceurl:function(){var t=this;this.$http.bangumiPlayurlAddOrEdit({url:this.addplayurl_url,source_name:this.addplayurl_source_name,bangumi_id:this.id,sort:this.addplayurl_sort}).then((function(e){200==e.code&&(t.dialog_addplayurl=!1,t.addplayurl_source_name="",t.addplayurl_url="",t.addplayurl_sort="",t.query(t.id))})).catch((function(t){console.log("error",t)}))},query:function(t){var e=this;this.$http.bangumiInfo(t).then((function(t){200==t.code&&(e.id=t.data.result.id,e.name=t.data.result.name,e.classification=t.data.result.classification,e.identification=t.data.result.identification,e.setscount=t.data.result.setscount,e.introduce=t.data.result.introduce,e.loadcover=t.data.result.cover,e.upstatus=t.data.result.upstatus,e.staff=t.data.result.staff,e.station_play=t.data.result.station_play,e.openplay_time=t.data.result.openplay_time,e.sort=t.data.result.sort,e.status=t.data.result.status,e.cover=t.data.result.sourcecover,e.playurl_tablist=t.data.playsource,e.cv_list=t.data.cv,console.log())})).catch((function(t){console.log("error",t)}))},upLoad:function(t){var e=this,a=new FormData;a.append("file",t.file),a.append("uploadKey","bangumicover"),console.log(t),this.$http.upload(a).then((function(t){console.log(t),console.log("上传成功"),200===t.code&&(e.cover=t.data.filename,e.loadcover=t.data.lodpath)}))},change:function(t,e){var a=this;this.$http.bangumiChange(t,e,0).then((function(t){200==t.code&&a.query(a.id)})).catch((function(t){console.log("error",t)}))},del:function(t,e){var a=this;this.$http.bangumiChange(t,e,"del").then((function(t){200==t.code&&a.query(a.id)})).catch((function(t){console.log("error",t)}))},save:function(){var t=this,e={id:this.id,classification:this.classification,openplay_time:this.openplay_time,name:this.name,setscount:this.setscount,introduce:this.introduce,cover:this.cover,upstatus:this.upstatus,staff:this.staff,station_play:this.station_play,status:this.status,sort:this.sort};this.$http.bangumiAddOrEdit(e).then((function(e){200==e.code&&t.query(t.id)})).catch((function(t){console.log("error",t)}))}}}),n=s,c=(a("b3d2"),a("5fce"),a("2877")),i=Object(c["a"])(n,l,o,!1,null,"0b98a97a",null);e["default"]=i.exports},"5fce":function(t,e,a){"use strict";var l=a("9e10"),o=a.n(l);o.a},"9e10":function(t,e,a){},b3d2:function(t,e,a){"use strict";var l=a("11c1"),o=a.n(l);o.a}}]);
//# sourceMappingURL=chunk-9ffb4070.6c800209.js.map